{% extends "base.html" %}
{% block content %}
<article class="episode">
  <h1>{{ ep.title }}</h1>

  {% if ep.image %}
    <img src="{{ ep.image }}" alt="{{ ep.title }}" class="ep-hero-art">
  {% endif %}

  <div class="muted">
    {{ ep.published | date("%b %d, %Y") }}
  </div>

  {% if ep.hosts or ep.guests %}
  <div class="ep-meta">
    {% if ep.hosts %}
      <div><strong>Hosts:</strong>
        {% for h in ep.hosts %}
          {% if h.url %}
            <a href="{{ h.url }}" target="_blank">{{ h.name }}</a>{% if not loop.last %}, {% endif %}
          {% else %}
            {{ h.name }}{% if not loop.last %}, {% endif %}
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
    {% if ep.guests %}
      <div><strong>Guests:</strong>
        {% for g in ep.guests %}
          {% if g.url %}
            <a href="{{ g.url }}" target="_blank">{{ g.name }}</a>{% if not loop.last %}, {% endif %}
          {% else %}
            {{ g.name }}{% if not loop.last %}, {% endif %}
          {% endif %}
        {% endfor %}
      </div>
    {% endif %}
  </div>
  {% endif %}

  {% if ep.audio %}
    <p><audio controls src="{{ ep.audio }}" style="width:100%"></audio></p>
  {% endif %}

  {% if ep.description %}
    <p class="ep-description">{{ ep.description }}</p>
  {% endif %}

  {% if ep.transcript_url and not ep.extra_html %}
    <p><a href="{{ ep.transcript_url }}" target="_blank">Transcript</a></p>
  {% endif %}

  {% if ep.extra_html %}
  <section class="episode-notes">
    <h2>Show Notes & Transcript</h2>
    <div class="content">
      {{ ep.extra_html | safe }}
    </div>
  </section>
  {% endif %}

  {% if ep.comments %}
  <section class="episode-comments">
    <h2>Notes</h2>
    <ul>
      {% for c in ep.comments %}
        <li>{{ c }}</li>
      {% endfor %}
    </ul>
  </section>
  {% endif %}
</article>
{% endblock %}
