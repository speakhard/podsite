{% extends "base.html" %}
{% block content %}

<article class="episode-page">
  <header class="episode-page-header">
    <div class="episode-page-art-wrap">
      {% if ep.image %}
        <img src="{{ ep.image }}" alt="{{ ep.title }}" class="episode-page-art">
      {% elif site.image %}
        <img src="{{ site.image }}" alt="{{ site.title }}" class="episode-page-art">
      {% endif %}
    </div>

    <div class="episode-page-meta">
      <h1 class="episode-page-title">{{ ep.title }}</h1>
      <p class="episode-page-date">
        {{ ep.published | date("%b %d, %Y") }}
      </p>

      {% if ep.subtitle %}
        <p class="episode-page-subtitle">
          {{ ep.subtitle }}
        </p>
      {% endif %}

      {% if ep.audio %}
        <audio controls preload="none" class="episode-audio">
          <source src="{{ ep.audio }}" type="audio/mpeg">
          Your browser does not support the audio element.
        </audio>
      {% endif %}

      {% if ep.transcript_url %}
        <p class="episode-page-transcript-link">
          <a href="{{ ep.transcript_url }}" target="_blank" rel="noopener">
            View official transcript
          </a>
        </p>
      {% endif %}
    </div>
  </header>

  <section class="episode-page-body">
    <div class="episode-page-section">
      <h2>Episode Notes</h2>
      {% if ep.content %}
        <div class="episode-page-notes">
          {{ ep.content | safe }}
        </div>
      {% elif ep.summary %}
        <p class="episode-page-notes">
          {{ ep.summary }}
        </p>
      {% else %}
        <p class="episode-page-notes episode-page-notes--empty">
          Show notes for this episode are coming soon.
        </p>
      {% endif %}
    </div>

    {% if ep.hosts or ep.guests %}
    <div class="episode-page-section two-column">
      {% if ep.hosts %}
      <div>
        <h3>Hosts</h3>
        <ul class="meta-list">
          {% for h in ep.hosts %}
            <li>{{ h }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
      {% if ep.guests %}
      <div>
        <h3>Guests</h3>
        <ul class="meta-list">
          {% for g in ep.guests %}
            <li>{{ g }}</li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </div>
    {% endif %}

    {% if ep.transcript_html %}
    <div class="episode-page-section">
      <h2>Transcript</h2>
      <div class="episode-page-transcript">
        {{ ep.transcript_html | safe }}
      </div>
    </div>
    {% endif %}
  </section>
</article>

{% endblock %}
